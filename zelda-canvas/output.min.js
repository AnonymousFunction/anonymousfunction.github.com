var Boomerang=function(game,player){switch(this.game=game,this.id="boomerang",this.velocity=3,this.center={x:player.center.x,y:player.center.y},this.menu={x:129,y:28},this.size={x:5,y:8},this.throwDistance=72,this.rotateAngle=0,this.rotateDelta=18,this.returnToLink=!1,this.direction=player.getDirection(),this.direction){case"up":this.endpoint={x:this.center.x,y:this.center.y-this.throwDistance};break;case"down":this.endpoint={x:this.center.x,y:this.center.y+this.throwDistance};break;case"left":this.endpoint={x:this.center.x-this.throwDistance,y:this.center.y};break;case"right":this.endpoint={x:this.center.x+this.throwDistance,y:this.center.y}}};Boomerang.prototype={draw:function(screen){var x=this.center.x,y=this.center.y,img=document.getElementById(this.id);screen.save(),screen.translate(x,y),screen.rotate(this.rotateAngle*Math.PI/180),screen.drawImage(img,-this.size.x/2,-this.size.y/2),screen.restore(),screen.fill()},update:function(){var link=this.game.player;if(this.rotateAngle+=this.rotateDelta,this.returnToLink){if(doBodiesCollide(link,this))return void this.game.removeBody(this);"up"===this.direction||"down"===this.direction?(this.center.x>link.center.x+link.size.x/2?this.center.x-=this.velocity-1:this.center.x<=link.center.x-link.size.x/2&&(this.center.x+=this.velocity-1),this.center.y>link.center.y+link.size.y/2?this.center.y-=this.velocity:this.center.y<=link.center.y-link.size.y/2&&(this.center.y+=this.velocity)):(this.center.x>link.center.x+link.size.x/2?this.center.x-=this.velocity:this.center.x<=link.center.x-link.size.x/2&&(this.center.x+=this.velocity),this.center.y>link.center.y+link.size.y/2?this.center.y-=this.velocity-1:this.center.y<=link.center.y-link.size.y/2&&(this.center.y+=this.velocity-1))}else"up"===this.direction?this.center.y-this.velocity>this.endpoint.y?this.center.y-=this.velocity:this.returnToLink=!0:"down"===this.direction?this.center.y+this.velocity<this.endpoint.y?this.center.y+=this.velocity:this.returnToLink=!0:"left"===this.direction?this.center.x-this.velocity>this.endpoint.x?this.center.x-=this.velocity:this.returnToLink=!0:"right"===this.direction&&(this.center.x+this.velocity<this.endpoint.x?this.center.x+=this.velocity:this.returnToLink=!0);(this.center.x<0||this.center.x>256||this.center.y<0||this.center.y>176)&&(this.returnToLink=!0)}};var SwordPower=function(game,center,swordDirection){this.game=game,this.spriteChangeCount=0,this.spriteCooldown=6,this.velocity=3,this.center={x:center.x,y:center.y},swordDirection.indexOf("up")>-1?(this.direction="up",this.id="sword-power-up",this.size={x:8,y:16},this.center.x--):swordDirection.indexOf("down")>-1?(this.direction="down",this.id="sword-power-down",this.size={x:8,y:16},this.center.x++):swordDirection.indexOf("left")>-1?(this.direction="left",this.id="sword-power-left",this.size={x:16,y:8},this.center.y++):swordDirection.indexOf("right")>-1&&(this.direction="right",this.id="sword-power-right",this.size={x:16,y:8},this.center.y++)};SwordPower.prototype={draw:function(screen){var x=this.center.x,y=this.center.y,img=document.getElementById(this.id);screen.drawImage(img,x-this.size.x/2,y-this.size.y/2)},update:function(){0===this.spriteChangeCount?this.spriteChangeCount=this.spriteCooldown:this.spriteChangeCount--,"up"===this.direction?(this.id="sword-power-up"===this.id?"sword-power-up-flash":"sword-power-up",this.center.y-=this.velocity):"down"===this.direction?(this.id="sword-power-down"===this.id?"sword-power-down-flash":"sword-power-down",this.center.y+=this.velocity):"left"===this.direction?(this.id="sword-power-left"===this.id?"sword-power-left-flash":"sword-power-left",this.center.x-=this.velocity):"right"===this.direction&&(this.id="sword-power-right"===this.id?"sword-power-right-flash":"sword-power-right",this.center.x+=this.velocity),(this.center.x<0||this.center.x>256||this.center.y<0||this.center.y>176)&&this.game.removeBody(this)}};